# Environment Configuration Guide

## Environment Files Structure

After cleanup, we now have a clean environment setup:

### Current Files:
- `.env` - Main development environment file
- `.env.development` - Development-specific overrides (same as .env for consistency)
- `.env.production` - Production environment file
- `.env.example` - Template for new developers

### Removed Files:
- `.env.local` - Removed (conflicted with main .env)
- `.env.vercel.production` - Removed (auto-generated by Vercel)

## Configuration by Environment

### Development (localhost:3000)
```bash
DATABASE_URL=postgresql://neondb_owner:npg_tnEDGMPV37WB@ep-tight-pine-a2baeagw-pooler.eu-central-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
AUTH_URL=http://localhost:3000
AUTH_SECRET="k1rdgAqGJxP37tcXjhxJwLNnMtNfgy28Uh0cJVNo/f8="
AUTH_TRUST_HOST=true
```

### Production (Vercel)
```bash
DATABASE_URL=postgresql://neondb_owner:npg_tnEDGMPV37WB@ep-tight-pine-a2baeagw-pooler.eu-central-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
AUTH_URL=https://media-contacts.vercel.app
AUTH_SECRET="k1rdgAqGJxP37tcXjhxJwLNnMtNfgy28Uh0cJVNo/f8="
AUTH_TRUST_HOST=true
```

## Key Fixes Applied

### 1. NextAuth URL Configuration
- **Before**: Hardcoded `https://media-contacts.vercel.app` in auth.ts
- **After**: Uses `process.env.AUTH_URL` dynamically
- **Result**: Proper localhost authentication in development

### 2. Cookie Domain Configuration
- **Before**: Always set to `.vercel.app` in production
- **After**: Only sets `.vercel.app` domain when AUTH_URL contains 'vercel.app'
- **Result**: Flexible deployment to different domains

### 3. Environment File Cleanup
- **Before**: 6 conflicting environment files
- **After**: 4 clean, purpose-specific files
- **Result**: Clear separation of concerns, no conflicts

## User Credentials

For testing authentication:
- **Paul Otto**: `paul.otto@example.com` / `password123`
- **Test User**: `test@example.com` / `testpass`

## Verification

To verify the setup is working:
1. Start development server: `npm run dev`
2. Navigate to `http://localhost:3000`
3. Login should now work without redirecting to production
4. Activity feed should show CRUD operations
5. All dashboard features should function properly

## Troubleshooting

If you still experience issues:
1. Clear browser cookies and localStorage
2. Restart the development server
3. Check that `.env` file has `AUTH_URL=http://localhost:3000`
4. Verify no other environment files are overriding the settings