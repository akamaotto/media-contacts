# Staging Environment Configuration
# This file contains staging-specific settings for the AI Search Feature

# Environment
NODE_ENV=staging

# Database Configuration
# Format: postgresql://username:password@hostname:port/database_name
DATABASE_URL=postgresql://username:password@localhost:5432/media_contacts_staging

# Redis Configuration
REDIS_URL=redis://localhost:6379/1

# NextAuth Configuration
AUTH_URL=https://staging.your-domain.com
AUTH_SECRET=your_staging_auth_secret_here
AUTH_TRUST_HOST=true

# AI Services Configuration - Staging Keys
# These should be set as GitHub Secrets in your repository

# OpenAI Configuration
OPENAI_API_KEY=sk-your-staging-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_ORGANIZATION=org-your-staging-organization-id
OPENAI_RATE_LIMIT_REQUESTS_PER_MINUTE=30
OPENAI_RATE_LIMIT_TOKENS_PER_MINUTE=50000
OPENAI_MAX_DAILY_SPEND=20
OPENAI_MAX_MONTHLY_SPEND=500

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your-staging-anthropic-api-key-here
ANTHROPIC_BASE_URL=https://api.anthropic.com
ANTHROPIC_RATE_LIMIT_REQUESTS_PER_MINUTE=25
ANTHROPIC_MAX_DAILY_SPEND=10
ANTHROPIC_MAX_MONTHLY_SPEND=300
ANTHROPIC_ENABLE_CONTEXT_CACHING=true

# Exa API Configuration
EXA_API_KEY=your-staging-exa-api-key-here
EXA_BASE_URL=https://api.exa.ai
EXA_SEARCH_QUOTA_PER_MONTH=2000
EXA_RATE_LIMIT_REQUESTS_PER_MINUTE=30
EXA_MAX_RESULTS=5
EXA_COST_PER_MONTH=20

# Firecrawl Configuration
FIRECRAWL_API_KEY=fc-your-staging-firecrawl-api-key-here
FIRECRAWL_BASE_URL=https://api.firecrawl.dev
FIRECRAWL_RATE_LIMIT_REQUESTS_PER_MINUTE=50
FIRECRAWL_TIMEOUT_SECONDS=30
FIRECRAWL_MAX_PAGES=5
FIRECRAWL_QUOTA_PER_MONTH=1000
FIRECRAWL_COST_PER_MONTH=10

# AI Services Global Configuration
AI_ENABLE_CACHING=true
AI_CACHE_TTL_LOCAL_SECONDS=1800
AI_CACHE_TTL_COLD_SECONDS=43200
AI_ENABLE_METRICS=true
AI_ENABLE_AUDIT_LOGGING=true
AI_LOG_LEVEL=debug

# Security Configuration
AI_ENCRYPTION_KEY=your-32-character-hex-staging-encryption-key-here

# Feature Flags Configuration
# These control the rollout of the AI Search feature in staging
AI_SEARCH_FEATURE_ENABLED=true
AI_SEARCH_ROLLOUT_PERCENTAGE=100
AI_SEARCH_ALLOWED_USER_SEGMENTS=internal,testers
AI_SEARCH_ENABLE_A_B_TESTING=false

# Monitoring and Alerting
# Webhook URLs for notifications (set as GitHub Secrets)
STAGING_WEBHOOK_URL=https://your-webhook-url.com/staging-deployments
HEALTH_WEBHOOK_URL=https://your-webhook-url.com/staging-health
COST_ALERT_WEBHOOK_URL=https://your-webhook-url.com/staging-cost-alerts

# Admin notification email
ADMIN_EMAIL=admin@your-domain.com

# Cost Monitoring Configuration
ALERT_THRESHOLD_DAILY=10
ALERT_THRESHOLD_MONTHLY=200

# Performance Configuration
# These settings optimize performance for staging
ENABLE_RESPONSE_COMPRESSION=true
ENABLE_STATIC_CACHING=true
ENABLE_API_RATE_LIMITING=true
API_RATE_LIMIT_REQUESTS_PER_MINUTE=50

# Logging Configuration
LOG_LEVEL=debug
ENABLE_STRUCTURED_LOGGING=true
ENABLE_REQUEST_LOGGING=true
LOG_RETENTION_DAYS=7

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CSP=true
ENABLE_HSTS=true

# Database Connection Pooling
DATABASE_POOL_MIN=1
DATABASE_POOL_MAX=5
DATABASE_POOL_IDLE_TIMEOUT=30000

# Session Configuration
SESSION_MAX_AGE=86400
SESSION_UPDATE_AGE=3600

# API Configuration
API_BASE_URL=https://staging.your-domain.com/api
API_VERSION=v1
API_TIMEOUT_SECONDS=30

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_CONNECT_SRC='self' https://api.openai.com https://api.anthropic.com https://api.exa.ai https://api.firecrawl.dev

# CORS Configuration
CORS_ORIGIN=https://staging.your-domain.com
CORS_CREDENTIALS=true

# Application Configuration
APP_NAME=Media Contacts - AI Search (Staging)
APP_VERSION=1.0.0-staging
APP_DESCRIPTION=Find media contacts with AI-powered search (Staging Environment)

# Deployment Configuration
DEPLOYMENT_ENVIRONMENT=staging
DEPLOYMENT_VERSION=latest-staging
DEPLOYMENT_TIMESTAMP=2024-01-01T00:00:00Z

# Backup Configuration
ENABLE_AUTOMATIC_BACKUPS=true
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE=0 3 * * *

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="The AI Search feature is temporarily unavailable for maintenance. Please try again later."

# Testing Configuration
ENABLE_TEST_MODE=true
ENABLE_MOCK_AI_RESPONSES=false
ENABLE_DETAILED_LOGGING=true